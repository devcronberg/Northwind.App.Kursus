
<!doctype html>
<html lang="da" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Michell Cronberg">
      
      
        <link rel="canonical" href="https://mcronberg.github.io\prosa-webapp/backend/">
      
      
        <link rel="prev" href="../overblik/">
      
      
        <link rel="next" href="../frontend/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Session 2 Backend - Byg en moderne webapplikation med C#</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/extra.css">
    
      <link rel="stylesheet" href="../assets/document_dates/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../assets/document_dates/tippy/light.css">
    
      <link rel="stylesheet" href="../assets/document_dates/tippy/material.css">
    
      <link rel="stylesheet" href="../assets/document_dates/tippy/shift-away.css">
    
      <link rel="stylesheet" href="../assets/document_dates/tippy/scale.css">
    
      <link rel="stylesheet" href="../assets/document_dates/tippy/backdrop.css">
    
      <link rel="stylesheet" href="../assets/document_dates/tippy/tippy.css">
    
      <link rel="stylesheet" href="../assets/document_dates/core/core.css">
    
      <link rel="stylesheet" href="../assets/document_dates/user.config.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    


  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#backend" class="md-skip">
          G√• til indholdet
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Sidehoved">
    <a href=".." title="Byg en moderne webapplikation med C#" class="md-header__button md-logo" aria-label="Byg en moderne webapplikation med C#" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Byg en moderne webapplikation med C#
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Session 2 Backend
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="S√∏g" placeholder="S√∏g" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="S√∏g">
        
        <button type="reset" class="md-search__icon md-icon" title="Nulstil s√∏gning" aria-label="Nulstil s√∏gning" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Start s√∏gning
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Byg en moderne webapplikation med C#" class="md-nav__button md-logo" aria-label="Byg en moderne webapplikation med C#" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Byg en moderne webapplikation med C#
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Forside
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Session 1 Ops√¶tning
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../overblik/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Session 1 Overblik
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Session 2 Backend
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Session 2 Backend
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Indholdsfortegnelse">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Indholdsfortegnelse
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hent-eksempel-kode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hent eksempel kode
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hent eksempel kode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clone-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Clone repository
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eller-download-som-zip" class="md-nav__link">
    <span class="md-ellipsis">
      
        Eller download som ZIP
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kr-applikationen" class="md-nav__link">
    <span class="md-ellipsis">
      
        K√∏r applikationen
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-apiet" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test API&rsquo;et
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#live-demo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Live Demo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#demo-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Demo Credentials
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hvad-er-en-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er en Backend?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hvad-er-et-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er et REST API?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hvad er et REST API?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-metoder-verbs" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTTP Metoder (Verbs)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-status-codes" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTTP Status Codes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restful-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        RESTful Endpoints
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projektets-teknologier" class="md-nav__link">
    <span class="md-ellipsis">
      
        Projektets Teknologier
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Projektets Teknologier">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-net-10" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. .NET 10
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-aspnet-core-web-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. ASP.NET Core Web API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-entity-framework-core" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Entity Framework Core
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-sqlite" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. SQLite
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-jwt-json-web-tokens" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. JWT (JSON Web Tokens)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-serilog" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Serilog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-swashbuckle" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Swashbuckle
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-og-entity-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        Database og Entity Framework
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database og Entity Framework">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#northwind-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Northwind Database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entity-framework-core" class="md-nav__link">
    <span class="md-ellipsis">
      
        Entity Framework Core
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queries-med-linq" class="md-nav__link">
    <span class="md-ellipsis">
      
        Queries med LINQ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controllers-og-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controllers og Endpoints
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Controllers og Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hvad-er-en-controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er en Controller?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#route-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        Route Mapping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-injection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dependency Injection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Response Types
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-med-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication med JWT
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication med JWT">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hvad-er-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er JWT?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#token-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Token Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-token-vs-refresh-token" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Token vs Refresh Token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Login Endpoint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protected-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protected Endpoints
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-appsettingsjson" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration (appsettings.json)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-og-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging og Monitoring
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging og Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structured-logging-med-serilog" class="md-nav__link">
    <span class="md-ellipsis">
      
        Structured Logging med Serilog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-levels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Log Levels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-appsettingsjson_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration (appsettings.json)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-i-controllers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging i Controllers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Health Checks
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swaggeropenapi-dokumentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Swagger/OpenAPI Dokumentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Swagger/OpenAPI Dokumentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hvad-er-swagger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er Swagger?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adgang" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adgang
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Annotations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwt-authentication-i-swagger" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWT Authentication i Swagger
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-og-containerisering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docker og Containerisering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker og Containerisering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hvad-er-en-container" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er en Container?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dockerfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docker Commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloud-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cloud Deployment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cloud Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rendercom" class="md-nav__link">
    <span class="md-ellipsis">
      
        Render.com
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renderyaml-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      
        render.yaml (Blueprint)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#free-tier-begrnsninger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Free Tier Begr√¶nsninger
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sikkerhed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sikkerhed
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sikkerhed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementerede-sikkerhedstiltag" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementerede Sikkerhedstiltag
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sikkerhedsforbedringer-til-produktion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sikkerhedsforbedringer til Produktion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Session 3 Frontend
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../spg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sp√∏rgsm√•l
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../links/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Links og Ressourcer
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Indholdsfortegnelse">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Indholdsfortegnelse
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hent-eksempel-kode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hent eksempel kode
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hent eksempel kode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clone-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Clone repository
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eller-download-som-zip" class="md-nav__link">
    <span class="md-ellipsis">
      
        Eller download som ZIP
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kr-applikationen" class="md-nav__link">
    <span class="md-ellipsis">
      
        K√∏r applikationen
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-apiet" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test API&rsquo;et
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#live-demo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Live Demo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#demo-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        Demo Credentials
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hvad-er-en-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er en Backend?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hvad-er-et-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er et REST API?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hvad er et REST API?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-metoder-verbs" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTTP Metoder (Verbs)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-status-codes" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTTP Status Codes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restful-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        RESTful Endpoints
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projektets-teknologier" class="md-nav__link">
    <span class="md-ellipsis">
      
        Projektets Teknologier
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Projektets Teknologier">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-net-10" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. .NET 10
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-aspnet-core-web-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. ASP.NET Core Web API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-entity-framework-core" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Entity Framework Core
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-sqlite" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. SQLite
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-jwt-json-web-tokens" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. JWT (JSON Web Tokens)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-serilog" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Serilog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-swashbuckle" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Swashbuckle
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-og-entity-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        Database og Entity Framework
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database og Entity Framework">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#northwind-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Northwind Database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entity-framework-core" class="md-nav__link">
    <span class="md-ellipsis">
      
        Entity Framework Core
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queries-med-linq" class="md-nav__link">
    <span class="md-ellipsis">
      
        Queries med LINQ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controllers-og-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controllers og Endpoints
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Controllers og Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hvad-er-en-controller" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er en Controller?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#route-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        Route Mapping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-injection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dependency Injection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Response Types
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-med-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication med JWT
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication med JWT">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hvad-er-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er JWT?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#token-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Token Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-token-vs-refresh-token" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Token vs Refresh Token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Login Endpoint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protected-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protected Endpoints
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-appsettingsjson" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration (appsettings.json)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-og-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging og Monitoring
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging og Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structured-logging-med-serilog" class="md-nav__link">
    <span class="md-ellipsis">
      
        Structured Logging med Serilog
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-levels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Log Levels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-appsettingsjson_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration (appsettings.json)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-i-controllers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging i Controllers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Health Checks
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swaggeropenapi-dokumentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Swagger/OpenAPI Dokumentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Swagger/OpenAPI Dokumentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hvad-er-swagger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er Swagger?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adgang" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adgang
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Annotations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwt-authentication-i-swagger" class="md-nav__link">
    <span class="md-ellipsis">
      
        JWT Authentication i Swagger
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-og-containerisering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docker og Containerisering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker og Containerisering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hvad-er-en-container" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hvad er en Container?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dockerfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docker Commands
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloud-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cloud Deployment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cloud Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rendercom" class="md-nav__link">
    <span class="md-ellipsis">
      
        Render.com
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renderyaml-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      
        render.yaml (Blueprint)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#free-tier-begrnsninger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Free Tier Begr√¶nsninger
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sikkerhed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sikkerhed
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sikkerhed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementerede-sikkerhedstiltag" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementerede Sikkerhedstiltag
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sikkerhedsforbedringer-til-produktion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sikkerhedsforbedringer til Produktion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<div><h1 id="backend">Backend</h1>
<div class="document-dates-plugin-wrapper document-dates-top"><div class="document-dates-plugin" locale="da"><div class="dd-left"><span class="dd-item" data-tippy-content data-tippy-raw="2026-01-10"><span class="material-icons" data-icon="doc_created"></span><time datetime="2026-01-10T00:00:00">2026-01-10</time></span><span class="dd-item" data-tippy-content data-tippy-raw="2026-01-10"><span class="material-icons" data-icon="doc_updated"></span><time datetime="2026-01-10T00:00:00">2026-01-10</time></span></div><div class="dd-right"><span class="material-icons" data-icon="doc_author"></span><div class="author-group"><div class="avatar-wrapper" data-name="Michell Cronberg" data-tippy-content data-tippy-raw='&lt;a href="mailto:michell@cronberg.dk"&gt;Michell Cronberg&lt;/a&gt;'><span class="avatar-text"></span><img class="avatar" data-src="" data-email="michell@cronberg.dk"></div></div></div></div></div>

<h2 id="hent-eksempel-kode">Hent eksempel kode</h2>
<p>Hele backend-koden er tilg√¶ngelig p√• GitHub, s√• du kan f√∏lge med, eksperimentere og k√∏re applikationen lokalt.</p>
<h3 id="clone-repository">Clone repository</h3>
<p>√Öbn en terminal og k√∏r:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/devcronberg/Northwind.App.Backend.git
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">cd</span><span class="w"> </span>Northwind.App.Backend
</span></code></pre></div>
<h3 id="eller-download-som-zip">Eller download som ZIP</h3>
<p>Hvis du ikke har Git installeret, eller foretr√¶kker at hente koden som en ZIP-fil:</p>
<ol>
<li>G√• til <a href="https://github.com/devcronberg/Northwind.App.Backend">https://github.com/devcronberg/Northwind.App.Backend</a></li>
<li>Klik p√• den gr√∏nne <strong>Code</strong> knap</li>
<li>V√¶lg <strong>Download ZIP</strong></li>
<li>Pak ZIP-filen ud p√• din computer</li>
<li>√Öbn mappen i en terminal eller VS Code</li>
</ol>
<h3 id="kr-applikationen">K√∏r applikationen</h3>
<ol>
<li><strong>Restore dependencies</strong></li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>dotnet<span class="w"> </span>restore
</span></code></pre></div>
<ol>
<li><strong>K√∏r applikationen</strong></li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>dotnet<span class="w"> </span>run
</span></code></pre></div>
<ol>
<li><strong>√Öbn Swagger UI</strong></li>
</ol>
<p>G√• til <a href="http://localhost:5000/swagger">http://localhost:5000/swagger</a> i din browser.</p>
<h3 id="test-apiet">Test API‚Äôet</h3>
<p><strong>Eksempel 1: Hent alle kunder (ingen authentication)</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>curl<span class="w"> </span>http://localhost:5000/api/public/customers
</span></code></pre></div>
<p><strong>Eksempel 2: Login og f√• JWT token</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:5000/api/auth/login<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span>-H<span class="w"> </span><span class="s2">"Content-Type: application/json"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span>-d<span class="w"> </span><span class="s1">'{"username":"admin","password":"admin"}'</span>
</span></code></pre></div>
<p><strong>Eksempel 3: Brug JWT token til beskyttet endpoint</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>curl<span class="w"> </span>http://localhost:5000/api/customers<span class="w"> </span><span class="se">\</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span>-H<span class="w"> </span><span class="s2">"Authorization: Bearer YOUR_ACCESS_TOKEN"</span>
</span></code></pre></div>
<h3 id="live-demo">Live Demo</h3>
<p>API‚Äôet er ogs√• deployed og tilg√¶ngeligt online:</p>
<p>üîó <strong><a href="https://northwind-backend-b088.onrender.com">https://northwind-backend-b088.onrender.com</a></strong></p>
<ul>
<li><strong>Swagger UI</strong>: <a href="https://northwind-backend-b088.onrender.com/swagger">https://northwind-backend-b088.onrender.com/swagger</a></li>
<li><strong>Health Check</strong>: <a href="https://northwind-backend-b088.onrender.com/health/live">https://northwind-backend-b088.onrender.com/health/live</a></li>
<li><strong>Version</strong>: <a href="https://northwind-backend-b088.onrender.com/version">https://northwind-backend-b088.onrender.com/version</a></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Render.com Free Tier</p>
<p>Applikationen k√∏rer p√• Render.com‚Äôs gratis tier, som automatisk ‚Äúsover‚Äù efter 15 minutter uden aktivitet. Den f√∏rste request efter s√∏vn kan tage 30-50 sekunder, mens tjenesten v√•gner op. Dette er normalt for free-tier deployments.</p>
</div>
<h3 id="demo-credentials">Demo Credentials</h3>
<div class="language-json highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="p">}</span>
</span></code></pre></div>
<p>eller</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="hvad-er-en-backend">Hvad er en Backend?</h2>
<p>En <strong>backend</strong> er den del af en webapplikation, der k√∏rer p√• en server og h√•ndterer:</p>
<ul>
<li><strong>Data</strong>: Gemmer og henter information fra en database</li>
<li><strong>Forretningslogik</strong>: Udf√∏rer beregninger, valideringer, og regler</li>
<li><strong>Authentication</strong>: Sikrer at kun autoriserede brugere har adgang</li>
<li><strong>API</strong>: Udstiller endpoints som frontend kan kalde</li>
</ul>
<h2 id="hvad-er-et-rest-api">Hvad er et REST API?</h2>
<p><strong>REST</strong> (Representational State Transfer) er en arkitektur for at bygge webservices. Et REST API bruger HTTP-protokollen til at kommunikere.</p>
<h3 id="http-metoder-verbs">HTTP Metoder (Verbs)</h3>
<table>
<thead>
<tr>
<th>Metode</th>
<th>Form√•l</th>
<th>Eksempel</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET</code></td>
<td>Hent data</td>
<td>Hent liste af kunder</td>
</tr>
<tr>
<td><code>POST</code></td>
<td>Opret nyt</td>
<td>Opret ny kunde</td>
</tr>
<tr>
<td><code>PUT</code></td>
<td>Opdater eksisterende</td>
<td>Opdater kunde info</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td>Slet</td>
<td>Slet en kunde</td>
</tr>
</tbody>
</table>
<h3 id="http-status-codes">HTTP Status Codes</h3>
<table>
<thead>
<tr>
<th>Kode</th>
<th>Betydning</th>
<th>Eksempel</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>200 OK</code></td>
<td>Success</td>
<td>Data hentet succesfuldt</td>
</tr>
<tr>
<td><code>201 Created</code></td>
<td>Oprettet</td>
<td>Ny kunde oprettet</td>
</tr>
<tr>
<td><code>400 Bad Request</code></td>
<td>Ugyldig request</td>
<td>Manglende felter</td>
</tr>
<tr>
<td><code>401 Unauthorized</code></td>
<td>Ikke logget ind</td>
<td>Manglende JWT token</td>
</tr>
<tr>
<td><code>404 Not Found</code></td>
<td>Findes ikke</td>
<td>Kunde ID findes ikke</td>
</tr>
<tr>
<td><code>500 Internal Server Error</code></td>
<td>Serverfejl</td>
<td>Uventet exception</td>
</tr>
</tbody>
</table>
<h3 id="restful-endpoints">RESTful Endpoints</h3>
<p>Endpoints f√∏lger et konsistent m√∏nster:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>GET    /api/customers          ‚Üí Hent alle kunder
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>GET    /api/customers/ALFKI    ‚Üí Hent specifik kunde
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>POST   /api/customers          ‚Üí Opret ny kunde
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>PUT    /api/customers/ALFKI    ‚Üí Opdater kunde
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>DELETE /api/customers/ALFKI    ‚Üí Slet kunde
</span></code></pre></div>
<h2 id="projektets-teknologier">Projektets Teknologier</h2>
<h3 id="1-net-10">1. <strong>.NET 10</strong></h3>
<ul>
<li>Microsofts moderne, cross-platform framework</li>
<li>Open source</li>
<li>K√∏rer p√• Windows, Linux, macOS</li>
</ul>
<h3 id="2-aspnet-core-web-api">2. <strong>ASP.NET Core Web API</strong></h3>
<ul>
<li>Framework til at bygge HTTP APIs</li>
<li>Hurtig, skalerbar, cloud-ready</li>
<li>Indbygget dependency injection</li>
</ul>
<h3 id="3-entity-framework-core">3. <strong>Entity Framework Core</strong></h3>
<ul>
<li>ORM (Object-Relational Mapper)</li>
<li>Mapper C# klasser til database tabeller</li>
<li>LINQ queries i stedet for SQL</li>
<li>Code-first approach</li>
</ul>
<h3 id="4-sqlite">4. <strong>SQLite</strong></h3>
<ul>
<li>Filbaseret database (ingen server n√∏dvendig)</li>
<li>Perfekt til demos og udvikling</li>
<li>Northwind.db filen i Assets mappen</li>
</ul>
<h3 id="5-jwt-json-web-tokens">5. <strong>JWT (JSON Web Tokens)</strong></h3>
<ul>
<li>Token-baseret authentication</li>
<li>Stateless (server gemmer ingen session)</li>
<li>Secure transmission af brugeridentitet</li>
</ul>
<h3 id="6-serilog">6. <strong>Serilog</strong></h3>
<ul>
<li>Struktureret logging library</li>
<li>Logger til console (container-ready)</li>
<li>Nemt at tilf√∏je andre sinks (filer, Seq, Application Insights)</li>
</ul>
<h3 id="7-swashbuckle">7. <strong>Swashbuckle</strong></h3>
<ul>
<li>Genererer OpenAPI/Swagger dokumentation</li>
<li>Interaktiv API test interface</li>
<li>Automatisk fra controller annotations</li>
</ul>
<h2 id="database-og-entity-framework">Database og Entity Framework</h2>
<h3 id="northwind-database">Northwind Database</h3>
<p>Northwind er en klassisk demo-database fra Microsoft, der simulerer en importvirksomhed:</p>
<p><strong>Tabeller</strong>:</p>
<ul>
<li><strong>Customers</strong>: Kunder (CompanyName, ContactName, Country, etc.)</li>
<li><strong>Orders</strong>: Ordrer (OrderDate, CustomerID, ShipAddress, etc.)</li>
<li><strong>Products</strong>: Produkter (ProductName, UnitPrice, UnitsInStock, etc.)</li>
<li><strong>Categories</strong>: Kategorier (CategoryName, Description)</li>
<li><strong>Suppliers</strong>: Leverand√∏rer</li>
<li><strong>Employees</strong>: Medarbejdere</li>
<li><strong>Shippers</strong>: Fragtfirmaer</li>
</ul>
<h3 id="entity-framework-core">Entity Framework Core</h3>
<p>EF Core mapper database tabeller til C# klasser:</p>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">// Models/EF/Customer.cs</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Customer</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p">{</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">CustomerId</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w">      </span><span class="c1">// Primary key: ALFKI</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">CompanyName</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w">     </span><span class="c1">// Alfreds Futterkiste</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">ContactName</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w">     </span><span class="c1">// Maria Anders</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">Country</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w">         </span><span class="c1">// Germany</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">ICollection</span><span class="o">&lt;</span><span class="n">Order</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Orders</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1">// Navigation property</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>DbContext</strong> er forbindelsen til databasen:</p>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">// Models/EF/NorthwindContext.cs</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">NorthwindContext</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">DbContext</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="p">{</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">DbSet</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Customers</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">DbSet</span><span class="o">&lt;</span><span class="n">Order</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Orders</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">DbSet</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Products</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnConfiguring</span><span class="p">(</span><span class="n">DbContextOptionsBuilder</span><span class="w"> </span><span class="n">optionsBuilder</span><span class="p">)</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">        </span><span class="n">optionsBuilder</span><span class="p">.</span><span class="n">UseSqlite</span><span class="p">(</span><span class="s">"Data Source=Assets/Northwind.db"</span><span class="p">);</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="queries-med-linq">Queries med LINQ</h3>
<p>I stedet for SQL bruges LINQ (Language Integrated Query):</p>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// SQL: SELECT * FROM Customers WHERE Country = 'Germany'</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kt">var</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Customers</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">Country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">"Germany"</span><span class="p">)</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">    </span><span class="p">.</span><span class="n">ToListAsync</span><span class="p">();</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="c1">// SQL: SELECT * FROM Customers JOIN Orders...</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="kt">var</span><span class="w"> </span><span class="n">customerWithOrders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Customers</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">    </span><span class="p">.</span><span class="n">Include</span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">Orders</span><span class="p">)</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">    </span><span class="p">.</span><span class="n">FirstOrDefaultAsync</span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">CustomerId</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
</span></code></pre></div>
<p><strong>AsNoTracking()</strong>: Bruges til read-only queries for performance:</p>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kt">var</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Customers</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">    </span><span class="p">.</span><span class="n">AsNoTracking</span><span class="p">()</span><span class="w">  </span><span class="c1">// EF Core tracker ikke √¶ndringer</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="p">.</span><span class="n">ToListAsync</span><span class="p">();</span>
</span></code></pre></div>
<hr>
<h2 id="controllers-og-endpoints">Controllers og Endpoints</h2>
<h3 id="hvad-er-en-controller">Hvad er en Controller?</h3>
<p>En controller er en C# klasse, der h√•ndterer HTTP requests og returnerer responses:</p>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="na">[ApiController]</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="na">[Route("api/[controller]</span><span class="s">")]</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CustomersController</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ControllerBase</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="p">{</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">NorthwindContext</span><span class="w"> </span><span class="n">_context</span><span class="p">;</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">ILogger</span><span class="o">&lt;</span><span class="n">CustomersController</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_logger</span><span class="p">;</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">CustomersController</span><span class="p">(</span><span class="n">NorthwindContext</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">ILogger</span><span class="o">&lt;</span><span class="n">CustomersController</span><span class="o">&gt;</span><span class="w"> </span><span class="n">logger</span><span class="p">)</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">        </span><span class="n">_context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">;</span><span class="w">  </span><span class="c1">// Dependency Injection</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">        </span><span class="n">_logger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logger</span><span class="p">;</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">    </span><span class="na">[HttpGet]</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&lt;</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">GetCustomers</span><span class="p">()</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">        </span><span class="n">_logger</span><span class="p">.</span><span class="n">LogInformation</span><span class="p">(</span><span class="s">"Fetching all customers"</span><span class="p">);</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Customers</span><span class="p">.</span><span class="n">AsNoTracking</span><span class="p">().</span><span class="n">ToListAsync</span><span class="p">();</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nf">Ok</span><span class="p">(</span><span class="n">customers</span><span class="p">);</span><span class="w">  </span><span class="c1">// 200 OK</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="route-mapping">Route Mapping</h3>
<p><strong>Attributes</strong> definerer hvordan URLs mapper til metoder:</p>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="na">[Route("api/[controller]</span><span class="s">")]  // [controller] = "</span><span class="n">customers</span><span class="s">"</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CustomersController</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ControllerBase</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="p">{</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="na">[HttpGet]</span><span class="w">                              </span><span class="c1">// GET /api/customers</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetAll</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="na">[HttpGet("{id}")]</span><span class="w">                      </span><span class="c1">// GET /api/customers/ALFKI</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetById</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">    </span><span class="na">[HttpPost]</span><span class="w">                             </span><span class="c1">// POST /api/customers</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Create</span><span class="p">([</span><span class="n">FromBody</span><span class="p">]</span><span class="w"> </span><span class="n">Customer</span><span class="w"> </span><span class="n">customer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">    </span><span class="na">[HttpPut("{id}")]</span><span class="w">                      </span><span class="c1">// PUT /api/customers/ALFKI</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Update</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">FromBody</span><span class="p">]</span><span class="w"> </span><span class="n">Customer</span><span class="w"> </span><span class="n">customer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">    </span><span class="na">[HttpDelete("{id}")]</span><span class="w">                   </span><span class="c1">// DELETE /api/customers/ALFKI</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Delete</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="dependency-injection">Dependency Injection</h3>
<p>ASP.NET Core har indbygget DI (Dependency Injection):</p>
<p><strong>Registrering</strong> (Program.cs):
</p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddDbContext</span><span class="o">&lt;</span><span class="n">NorthwindContext</span><span class="o">&gt;</span><span class="p">();</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddScoped</span><span class="o">&lt;</span><span class="n">IMyService</span><span class="p">,</span><span class="w"> </span><span class="n">MyService</span><span class="o">&gt;</span><span class="p">();</span>
</span></code></pre></div>
<p><strong>Brug</strong> (Controller):
</p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CustomersController</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ControllerBase</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="p">{</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">NorthwindContext</span><span class="w"> </span><span class="n">_context</span><span class="p">;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="c1">// ASP.NET Core injicerer automatisk NorthwindContext</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">CustomersController</span><span class="p">(</span><span class="n">NorthwindContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">        </span><span class="n">_context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">;</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="response-types">Response Types</h3>
<p><strong>ProducesResponseType</strong> dokumenterer mulige responses til Swagger:</p>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="na">[HttpGet("{id}")]</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="na">[ProducesResponseType(StatusCodes.Status200OK, Type = typeof(Customer))]</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="na">[ProducesResponseType(StatusCodes.Status404NotFound)]</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetById</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">id</span><span class="p">)</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="p">{</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">customer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Customers</span><span class="p">.</span><span class="n">FindAsync</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">customer</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nf">NotFound</span><span class="p">();</span><span class="w">  </span><span class="c1">// 404</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">Ok</span><span class="p">(</span><span class="n">customer</span><span class="p">);</span><span class="w">    </span><span class="c1">// 200</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="p">}</span>
</span></code></pre></div>
<hr>
<h2 id="authentication-med-jwt">Authentication med JWT</h2>
<h3 id="hvad-er-jwt">Hvad er JWT?</h3>
<p><strong>JWT (JSON Web Token)</strong> er en sikker m√•de at transmittere information mellem parter.</p>
<p><strong>Struktur</strong>: <code>header.payload.signature</code></p>
<p>Eksempel JWT:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJBZG1pbiIsImV4cCI6MTYyMzQ1Njc4OX0.
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
</span></code></pre></div>
<p><strong>Payload</strong> (decoded):
</p><div class="language-json highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="p">{</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">  </span><span class="nt">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">  </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin"</span><span class="p">,</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">  </span><span class="nt">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1623456789</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="token-flow">Token Flow</h3>
<ol>
<li><strong>Login</strong>: Bruger sender username/password</li>
<li><strong>Validate</strong>: Server checker credentials</li>
<li><strong>Generate</strong>: Server genererer JWT token</li>
<li><strong>Return</strong>: Token sendes til klient</li>
<li><strong>Store</strong>: Klient gemmer token (localStorage/memory)</li>
<li><strong>Use</strong>: Klient sender token i hver request: <code>Authorization: Bearer &lt;token&gt;</code></li>
<li><strong>Validate</strong>: Server validerer token ved hver request</li>
</ol>
<h3 id="access-token-vs-refresh-token">Access Token vs Refresh Token</h3>
<p><strong>Access Token</strong>:
- Kort levetid (60 minutter)
- Bruges til hver API request
- Indeholder brugerinfo (claims)</p>
<p><strong>Refresh Token</strong>:
- Lang levetid (7 dage)
- Bruges kun til at f√• ny access token
- Kan revokes (logges ud)</p>
<h3 id="login-endpoint">Login Endpoint</h3>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="na">[HttpPost("login")]</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&lt;</span><span class="n">LoginResponse</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Login</span><span class="p">([</span><span class="n">FromBody</span><span class="p">]</span><span class="w"> </span><span class="n">LoginRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="p">{</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">    </span><span class="c1">// 1. Validate credentials (demo: hardcoded users)</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ValidateUser</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">Username</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="n">Password</span><span class="p">);</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">user</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nf">Unauthorized</span><span class="p">(</span><span class="s">"Invalid credentials"</span><span class="p">);</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">    </span><span class="c1">// 2. Generate tokens</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">accessToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerateAccessToken</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">refreshToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerateRefreshToken</span><span class="p">();</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">    </span><span class="c1">// 3. Store refresh token (in-memory for demo, database for production)</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">    </span><span class="n">_refreshTokens</span><span class="p">[</span><span class="n">refreshToken</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">Username</span><span class="p">,</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">.</span><span class="n">AddDays</span><span class="p">(</span><span class="mi">7</span><span class="p">));</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="w">    </span><span class="c1">// 4. Return tokens</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">Ok</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">LoginResponse</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="w">        </span><span class="n">AccessToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">accessToken</span><span class="p">,</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">        </span><span class="n">RefreshToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">refreshToken</span><span class="p">,</span>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">        </span><span class="n">ExpiresIn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="w">        </span><span class="n">Username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="n">Username</span><span class="p">,</span>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="w">        </span><span class="n">Role</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="n">Role</span>
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="protected-endpoints">Protected Endpoints</h3>
<p><strong>[Authorize]</strong> attribute kr√¶ver valid JWT:</p>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="na">[Authorize]</span><span class="w">  </span><span class="c1">// Kr√¶ver valid access token</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="na">[HttpGet]</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&lt;</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">GetCustomers</span><span class="p">()</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="p">{</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="c1">// Denne metode kan kun kaldes med valid JWT token</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="n">Identity</span><span class="p">.</span><span class="n">Name</span><span class="p">;</span><span class="w">  </span><span class="c1">// Fra token claims</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">    </span><span class="n">_logger</span><span class="p">.</span><span class="n">LogInformation</span><span class="p">(</span><span class="s">"User {Username} fetching customers"</span><span class="p">,</span><span class="w"> </span><span class="n">username</span><span class="p">);</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Customers</span><span class="p">.</span><span class="n">AsNoTracking</span><span class="p">().</span><span class="n">ToListAsync</span><span class="p">();</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">Ok</span><span class="p">(</span><span class="n">customers</span><span class="p">);</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="configuration-appsettingsjson">Configuration (appsettings.json)</h3>
<div class="language-json highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="nt">"Jwt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="nt">"Secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ThisIsASecretKeyForDemoOnlyChangeInProduction123!"</span><span class="p">,</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">    </span><span class="nt">"Issuer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Northwind.App.Backend"</span><span class="p">,</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">    </span><span class="nt">"Audience"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Northwind.App.Frontend"</span><span class="p">,</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span><span class="nt">"AccessTokenExpirationMinutes"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">    </span><span class="nt">"RefreshTokenExpirationDays"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="p">}</span>
</span></code></pre></div>
<p>‚ö†Ô∏è <strong>Vigtigt</strong>: I produktion skal <code>Secret</code> v√¶re en environment variable, ALDRIG hardcoded!</p>
<hr>
<h2 id="logging-og-monitoring">Logging og Monitoring</h2>
<h3 id="structured-logging-med-serilog">Structured Logging med Serilog</h3>
<p><strong>Structured logging</strong> logger data som strukturerede events i stedet for plain text:</p>
<p>‚ùå <strong>Old way</strong>:
</p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">"User admin logged in at 2026-01-04"</span><span class="p">);</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="c1">// Sv√¶rt at parse, s√∏ge, filtrere</span>
</span></code></pre></div>
<p>‚úÖ <strong>New way</strong>:
</p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">_logger</span><span class="p">.</span><span class="n">LogInformation</span><span class="p">(</span><span class="s">"User {Username} logged in at {Timestamp}"</span><span class="p">,</span><span class="w"> </span><span class="s">"admin"</span><span class="p">,</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">);</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="c1">// Output: {"Username": "admin", "Timestamp": "2026-01-04T10:30:00Z", "Message": "User admin logged in"}</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="c1">// Nemt at s√∏ge, filtrere, analysere</span>
</span></code></pre></div>
<h3 id="log-levels">Log Levels</h3>
<table>
<thead>
<tr>
<th>Level</th>
<th>Hvorn√•r bruges</th>
<th>Eksempel</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Trace</code></td>
<td>Meget detaljeret debugging</td>
<td>‚ÄúEntering method X with param Y‚Äù</td>
</tr>
<tr>
<td><code>Debug</code></td>
<td>Debugging info</td>
<td>‚ÄúQuery returned 5 rows‚Äù</td>
</tr>
<tr>
<td><code>Information</code></td>
<td>Normal flow</td>
<td>‚ÄúUser logged in‚Äù, ‚ÄúCustomer created‚Äù</td>
</tr>
<tr>
<td><code>Warning</code></td>
<td>Noget uventet men ikke kritisk</td>
<td>‚ÄúSlow query‚Äù, ‚ÄúDeprecated API called‚Äù</td>
</tr>
<tr>
<td><code>Error</code></td>
<td>Fejl der skal fixes</td>
<td>‚ÄúDatabase connection failed‚Äù</td>
</tr>
<tr>
<td><code>Critical</code></td>
<td>Alvorlige fejl</td>
<td>‚ÄúOut of memory‚Äù, ‚ÄúData corruption‚Äù</td>
</tr>
</tbody>
</table>
<h3 id="configuration-appsettingsjson_1">Configuration (appsettings.json)</h3>
<div class="language-json highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="p">{</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">  </span><span class="nt">"Serilog"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">    </span><span class="nt">"Using"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Serilog.Sinks.Console"</span><span class="w"> </span><span class="p">],</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="nt">"MinimumLevel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">      </span><span class="nt">"Default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Information"</span><span class="p">,</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">      </span><span class="nt">"Override"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">        </span><span class="nt">"Microsoft"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Warning"</span><span class="p">,</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="w">        </span><span class="nt">"System"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Warning"</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="w">    </span><span class="nt">"WriteTo"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Console"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Forklaring</strong>:
- <code>Default: Information</code>: Log alt p√• Information level og h√∏jere
- <code>Microsoft/System: Warning</code>: Reducer noise fra framework (kun warnings+)
- <code>WriteTo: Console</code>: Log til stdout (perfekt til containers)</p>
<h3 id="logging-i-controllers">Logging i Controllers</h3>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CustomersController</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ControllerBase</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="p">{</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">ILogger</span><span class="o">&lt;</span><span class="n">CustomersController</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_logger</span><span class="p">;</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">CustomersController</span><span class="p">(</span><span class="n">ILogger</span><span class="o">&lt;</span><span class="n">CustomersController</span><span class="o">&gt;</span><span class="w"> </span><span class="n">logger</span><span class="p">)</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">        </span><span class="n">_logger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logger</span><span class="p">;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">    </span><span class="na">[HttpGet]</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCustomers</span><span class="p">()</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">        </span><span class="n">_logger</span><span class="p">.</span><span class="n">LogInformation</span><span class="p">(</span><span class="s">"Fetching all customers"</span><span class="p">);</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">        </span><span class="k">try</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Customers</span><span class="p">.</span><span class="n">ToListAsync</span><span class="p">();</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="w">            </span><span class="n">_logger</span><span class="p">.</span><span class="n">LogInformation</span><span class="p">(</span><span class="s">"Retrieved {Count} customers"</span><span class="p">,</span><span class="w"> </span><span class="n">customers</span><span class="p">.</span><span class="n">Count</span><span class="p">);</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nf">Ok</span><span class="p">(</span><span class="n">customers</span><span class="p">);</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="w">        </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="w">            </span><span class="n">_logger</span><span class="p">.</span><span class="n">LogError</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span><span class="w"> </span><span class="s">"Failed to retrieve customers"</span><span class="p">);</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a><span class="w">            </span><span class="k">throw</span><span class="p">;</span><span class="w">  </span><span class="c1">// Global error handler tager over</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="health-checks">Health Checks</h3>
<p>Health checks fort√¶ller om applikationen k√∏rer korrekt:</p>
<p><strong>Endpoints</strong>:
- <code>/health</code> - Basic ASP.NET Core health check
- <code>/health/live</code> - Liveness probe (bruges af Kubernetes/Docker)
- <code>/health/ready</code> - Readiness probe (checker database connection)</p>
<p><strong>Kubernetes/Docker bruger disse til</strong>:
- <strong>Liveness</strong>: Er container alive? (genstart hvis nej)
- <strong>Readiness</strong>: Er container klar til trafik? (fjern fra load balancer hvis nej)</p>
<hr>
<h2 id="swaggeropenapi-dokumentation">Swagger/OpenAPI Dokumentation</h2>
<h3 id="hvad-er-swagger">Hvad er Swagger?</h3>
<p><strong>Swagger UI</strong> er en interaktiv webside, der:
- Viser alle API endpoints
- Dokumenterer request/response format
- Lader dig teste API‚Äôet direkte i browseren
- Genereres automatisk fra controller kode</p>
<p><strong>OpenAPI</strong> er standarden, Swagger er implementationen.</p>
<h3 id="adgang">Adgang</h3>
<p>Start applikationen og g√• til: <code>https://localhost:5001/swagger</code></p>
<h3 id="features">Features</h3>
<ol>
<li><strong>Endpoint liste</strong>: Alle controllers og metoder</li>
<li><strong>Try it out</strong>: Test API uden Postman</li>
<li><strong>Schemas</strong>: Se request/response modeller</li>
<li><strong>Authentication</strong>: Login og brug JWT token</li>
</ol>
<h3 id="annotations">Annotations</h3>
<p>Controllers bruger attributes til at dokumentere API‚Äôet:</p>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1">/// &lt;summary&gt;</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="c1">/// Gets all customers from the database</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="c1">/// &lt;/summary&gt;</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="c1">/// &lt;returns&gt;List of customers&lt;/returns&gt;</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="c1">/// &lt;response code="200"&gt;Returns the list of customers&lt;/response&gt;</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="na">[HttpGet]</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="na">[ProducesResponseType(StatusCodes.Status200OK, Type = typeof(IEnumerable&lt;Customer&gt;))]</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">ActionResult</span><span class="o">&lt;</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">GetCustomers</span><span class="p">()</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="p">{</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="w">    </span><span class="c1">// ...</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="jwt-authentication-i-swagger">JWT Authentication i Swagger</h3>
<ol>
<li>Klik p√• <strong>‚ÄúAuthorize‚Äù</strong> knap (l√•s-ikon)</li>
<li>Login via <code>/api/auth/login</code> endpoint</li>
<li>Kopier <code>accessToken</code> fra response</li>
<li>Inds√¶t i ‚ÄúAuthorize‚Äù dialog: <code>Bearer &lt;token&gt;</code></li>
<li>Nu kan du kalde protected endpoints</li>
</ol>
<hr>
<h2 id="docker-og-containerisering">Docker og Containerisering</h2>
<h3 id="hvad-er-en-container">Hvad er en Container?</h3>
<p>En <strong>container</strong> er en let, standalone pakke, der indeholder:
- Din applikation
- Runtime (.NET)
- Libraries
- Dependencies
- Configuration</p>
<p><strong>Fordele</strong>:
- ‚úÖ ‚ÄúVirker p√• min maskine‚Äù problem l√∏st
- ‚úÖ Samme milj√∏ i development, test, production
- ‚úÖ Hurtig deployment
- ‚úÖ Nem skalering
- ‚úÖ Isolation (hver app i sin container)</p>
<p><strong>Docker</strong> vs <strong>VM</strong>:
- VM: Fuld OS, stor, langsom boot
- Container: Deler host OS kernel, lille, hurtig boot (sekunder)</p>
<h3 id="dockerfile">Dockerfile</h3>
<p><strong>Dockerfile</strong> er en opskrift p√• hvordan containeren bygges:</p>
<div class="language-dockerfile highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c"># Stage 1: Build</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="k">FROM</span><span class="w"> </span><span class="s">mcr.microsoft.com/dotnet/sdk:10.0</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">build</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/src</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="k">COPY</span><span class="w"> </span><span class="o">[</span><span class="s2">"Northwind.App.Backend.csproj"</span>,<span class="w"> </span><span class="s2">"./"</span><span class="o">]</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="k">RUN</span><span class="w"> </span>dotnet<span class="w"> </span>restore
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>.
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="k">RUN</span><span class="w"> </span>dotnet<span class="w"> </span>build<span class="w"> </span>-c<span class="w"> </span>Release<span class="w"> </span>-o<span class="w"> </span>/app/build
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="c"># Stage 2: Publish</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="k">FROM</span><span class="w"> </span><span class="s">build</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">publish</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="k">RUN</span><span class="w"> </span>dotnet<span class="w"> </span>publish<span class="w"> </span>-c<span class="w"> </span>Release<span class="w"> </span>-o<span class="w"> </span>/app/publish<span class="w"> </span>/p:UseAppHost<span class="o">=</span>false
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="c"># Stage 3: Runtime</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="k">FROM</span><span class="w"> </span><span class="s">mcr.microsoft.com/dotnet/aspnet:10.0</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">final</span>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a><span class="c"># Security: Run as non-root user</span>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a><span class="k">RUN</span><span class="w"> </span>groupadd<span class="w"> </span>-g<span class="w"> </span><span class="m">1001</span><span class="w"> </span>appuser<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a><span class="w">    </span>useradd<span class="w"> </span>-r<span class="w"> </span>-u<span class="w"> </span><span class="m">1001</span><span class="w"> </span>-g<span class="w"> </span>appuser<span class="w"> </span>appuser
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a><span class="k">USER</span><span class="w"> </span><span class="s">appuser</span>
</span><span id="__span-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>
</span><span id="__span-28-22"><a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a><span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>publish<span class="w"> </span>/app/publish<span class="w"> </span>.
</span><span id="__span-28-23"><a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>
</span><span id="__span-28-24"><a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a><span class="c"># Dynamic port binding</span>
</span><span id="__span-28-25"><a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a><span class="k">ENV</span><span class="w"> </span><span class="nv">PORT</span><span class="o">=</span><span class="m">8080</span>
</span><span id="__span-28-26"><a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a><span class="k">EXPOSE</span><span class="w"> </span><span class="s">8080</span>
</span><span id="__span-28-27"><a id="__codelineno-28-27" name="__codelineno-28-27" href="#__codelineno-28-27"></a>
</span><span id="__span-28-28"><a id="__codelineno-28-28" name="__codelineno-28-28" href="#__codelineno-28-28"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">"dotnet"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Northwind.App.Backend.dll"</span><span class="p">]</span>
</span></code></pre></div>
<p><strong>Multi-stage build</strong> fordele:
- Stage 1: SDK image (stor, 700MB) - kun til build
- Stage 3: Runtime image (lille, 200MB) - til produktion
- Resultat: Mindre image, hurtigere deployment</p>
<h3 id="docker-commands">Docker Commands</h3>
<p><strong>Build image</strong>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>northwind-backend<span class="w"> </span>.
</span></code></pre></div>
<p><strong>Run container</strong>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span>--name<span class="w"> </span>northwind<span class="w"> </span>northwind-backend
</span></code></pre></div>
<p><strong>View logs</strong>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>docker<span class="w"> </span>logs<span class="w"> </span>northwind
</span></code></pre></div>
<p><strong>Stop container</strong>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>docker<span class="w"> </span>stop<span class="w"> </span>northwind
</span></code></pre></div>
<p><strong>Remove container</strong>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>docker<span class="w"> </span>rm<span class="w"> </span>northwind
</span></code></pre></div>
<h3 id="environment-variables">Environment Variables</h3>
<p>I produktion overskrives config med environment variables:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">  </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span><span class="se">\</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">Jwt__Secret</span><span class="o">=</span><span class="s2">"ProductionSecretKey123!"</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">ConnectionStrings__DefaultConnection</span><span class="o">=</span><span class="s2">"Server=..."</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">  </span>northwind-backend
</span></code></pre></div>
<hr>
<h2 id="cloud-deployment">Cloud Deployment</h2>
<h3 id="rendercom">Render.com</h3>
<p>Render er en moderne cloud platform (alternativ til Heroku):</p>
<p><strong>Features</strong>:
- ‚úÖ Git-baseret deployment (push to deploy)
- ‚úÖ Automatisk SSL (HTTPS)
- ‚úÖ Health checks
- ‚úÖ Environment variables
- ‚úÖ Auto-scaling
- ‚úÖ Gratis tier (med begr√¶nsninger)</p>
<h3 id="renderyaml-blueprint">render.yaml (Blueprint)</h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">northwind-backend</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">    </span><span class="nt">runtime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frankfurt</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">    </span><span class="nt">plan</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">free</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">    </span><span class="nt">healthCheckPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/health/live</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">    </span><span class="nt">envVars</span><span class="p">:</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ASPNETCORE_ENVIRONMENT</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Production</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Jwt__Secret</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="w">        </span><span class="nt">generateValue</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PORT</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</span></code></pre></div>
<p><strong>Deployment proces</strong>:
1. Push kode til GitHub
2. Connect GitHub repo til Render
3. Render detekterer <code>render.yaml</code>
4. Bygger Docker image
5. Deployer til Frankfurt region
6. Applikation tilg√¶ngelig p√• <code>https://[app-name].onrender.com</code></p>
<h3 id="free-tier-begrnsninger">Free Tier Begr√¶nsninger</h3>
<p>‚ö†Ô∏è <strong>Render Free Tier</strong>:
- Spinner ned efter 15 min inaktivitet
- F√∏rste request efter spin-down tager 30-60 sek
- 750 timer/m√•ned gratis
- Perfekt til demos, ikke production</p>
<hr>
<h2 id="sikkerhed">Sikkerhed</h2>
<h3 id="implementerede-sikkerhedstiltag">Implementerede Sikkerhedstiltag</h3>
<p>‚úÖ <strong>JWT Authentication</strong>
- Token-baseret, stateless
- Configurable expiration
- Refresh token rotation</p>
<p>‚úÖ <strong>HTTPS</strong>
- TLS encryption
- Response compression kun over HTTPS</p>
<p>‚úÖ <strong>Non-root Container User</strong>
- K√∏rer som UID/GID 1001
- Begr√¶nset systemadgang</p>
<p>‚úÖ <strong>Problem Details (RFC 7807)</strong>
- Konsistent error format
- Ingen stack traces i produktion</p>
<p>‚úÖ <strong>Health Checks</strong>
- Liveness/Readiness probes
- Monitoring integration</p>
<h3 id="sikkerhedsforbedringer-til-produktion">Sikkerhedsforbedringer til Produktion</h3>
<p>‚ö†Ô∏è <strong>Nuv√¶rende begr√¶nsninger (demo)</strong>:</p>
<ol>
<li>
<p><strong>JWT Secret hardcoded</strong>
   </p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="c1">// appsettings.json - IKKE SIKKERT!</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="s">"Jwt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">  </span><span class="s">"Secret"</span><span class="p">:</span><span class="w"> </span><span class="s">"ThisIsASecretKeyForDemoOnlyChangeInProduction123!"</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="p">}</span>
</span></code></pre></div>
   <strong>Fix</strong>: Brug environment variable eller Azure Key Vault
</li>
<li>
<p><strong>In-memory Token Storage</strong>
   </p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="c1">// AuthController.cs</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">Username</span><span class="p">,</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="n">Expiry</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_refreshTokens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">();</span>
</span></code></pre></div>
   <strong>Problem</strong>: Forsvinder ved restart, virker ikke med multiple instances
   <strong>Fix</strong>: Redis, database, eller distributed cache
</li>
<li>
<p><strong>Hardcoded Demo Users</strong>
   </p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">Username</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">"admin"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="n">Password</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">"admin"</span><span class="p">)</span>
</span></code></pre></div>
   <strong>Fix</strong>: Database med hashed passwords (bcrypt, Argon2)
</li>
<li>
<p><strong>CORS Allow All</strong>
   </p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="n">policy</span><span class="p">.</span><span class="n">AllowAnyOrigin</span><span class="p">()</span>
</span></code></pre></div>
   <strong>Fix</strong>: Specificer konkrete origins
</li>
<li>
<p><strong>SQLite Database</strong></p>
</li>
<li>Filbaseret, ikke skalerbar
   <strong>Fix</strong>: PostgreSQL, SQL Server, eller Azure SQL</li>
</ol>
<h3 id="best-practices">Best Practices</h3>
<p><strong>Environment-specific Configuration</strong>:
</p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1">// Program.cs</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">app</span><span class="p">.</span><span class="n">Environment</span><span class="p">.</span><span class="n">IsDevelopment</span><span class="p">())</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="p">{</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">    </span><span class="n">app</span><span class="p">.</span><span class="n">UseSwagger</span><span class="p">();</span><span class="w">  </span><span class="c1">// Kun i development</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="p">}</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="k">else</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="p">{</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="w">    </span><span class="n">app</span><span class="p">.</span><span class="n">UseHsts</span><span class="p">();</span><span class="w">     </span><span class="c1">// Kun i production</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Password Hashing</strong>:
</p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="c1">// Brug aldrig plain text passwords!</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System.Security.Cryptography</span><span class="p">;</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="k">using</span><span class="w"> </span><span class="nn">Microsoft.AspNetCore.Cryptography.KeyDerivation</span><span class="p">;</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="kt">string</span><span class="w"> </span><span class="n">hashedPassword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Convert</span><span class="p">.</span><span class="n">ToBase64String</span><span class="p">(</span><span class="n">KeyDerivation</span><span class="p">.</span><span class="n">Pbkdf2</span><span class="p">(</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="w">    </span><span class="n">password</span><span class="p">:</span><span class="w"> </span><span class="n">password</span><span class="p">,</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="w">    </span><span class="n">salt</span><span class="p">:</span><span class="w"> </span><span class="n">salt</span><span class="p">,</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="w">    </span><span class="n">prf</span><span class="p">:</span><span class="w"> </span><span class="n">KeyDerivationPrf</span><span class="p">.</span><span class="n">HMACSHA256</span><span class="p">,</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="w">    </span><span class="n">iterationCount</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span><span class="p">,</span>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="w">    </span><span class="n">numBytesRequested</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">8</span><span class="p">));</span>
</span></code></pre></div>
<p><strong>Rate Limiting</strong>:
</p><div class="language-csharp highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="c1">// .NET 7+ indbygget rate limiting</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddRateLimiter</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="p">{</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddFixedWindowLimiter</span><span class="p">(</span><span class="s">"fixed"</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="w">        </span><span class="n">options</span><span class="p">.</span><span class="n">PermitLimit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="w">        </span><span class="n">options</span><span class="p">.</span><span class="n">Window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TimeSpan</span><span class="p">.</span><span class="n">FromSeconds</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="p">});</span>
</span></code></pre></div></div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.copy", "navigation.indexes"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Kopieret til udklipsholderen", "clipboard.copy": "Kopi\u00e9r til udklipsholderen", "search.result.more.one": "1 resultat mere p\u00e5 denne side", "search.result.more.other": "# resultater mere p\u00e5 denne side", "search.result.none": "Ingen resultater fundet", "search.result.one": "1 resultat", "search.result.other": "# resultater", "search.result.placeholder": "Indtast s\u00f8geord", "search.result.term.missing": "Mangler", "select.version": "V\u00e6lg version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../assets/document_dates/tippy/popper.min.js"></script>
      
        <script src="../assets/document_dates/tippy/tippy.umd.min.js"></script>
      
        <script src="../assets/document_dates/core/md5.min.js"></script>
      
        <script src="../assets/document_dates/core/default.config.js"></script>
      
        <script src="../assets/document_dates/user.config.js"></script>
      
        <script src="../assets/document_dates/core/utils.js"></script>
      
        <script src="../assets/document_dates/core/core.js"></script>
      
    
  </body>
</html>